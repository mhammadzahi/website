{% extends 'base.html' %}

{% block title %}Blog - Yalla IoT{% endblock %}

{% block content %}
<div class="container section-padding" style="margin-top: 60px;">
    <div class="text-center mb-5">
        <h1 class="section-title gradient-text">Latest News & Insights</h1>
        <p class="text-muted">Stay updated with the latest trends in IoT and technology.</p>
    </div>

    <div class="row g-4">
        {% for post in posts %}
        <div class="col-md-4">
            <div class="card h-100 border-0 overflow-hidden">
                <img src="{{ post.image }}" class="card-img-top" alt="{{ post.title }}"
                    style="height: 200px; object-fit: cover;">
                <div class="card-body d-flex flex-column">
                    <div class="mb-2 text-muted small">
                        <i class="far fa-calendar-alt me-1"></i> {{ post.date }}
                    </div>
                    <h5 class="card-title fw-bold">{{ post.title }}</h5>
                    <p class="card-text text-muted flex-grow-1">{{ post.content[:100] | safe }}...</p>
                    <a href="{{ url_for('post', post_slug=post.slug) }}" class="btn btn-primary mt-3">Read More</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Pagination -->
    {% if total_pages > 1 %}
    <nav aria-label="Blog pagination" class="mt-5">
        <ul class="pagination justify-content-center">
            <!-- Previous Button -->
            <li class="page-item {% if page == 1 %}disabled{% endif %}">
                <a class="page-link {% if page > 1 %}gradient-text{% endif %}" href="{% if page > 1 %}{{ url_for('blog', page=page-1) }}{% else %}#{% endif %}"
                    aria-label="Previous">
                    <i class="fas fa-chevron-left"></i>
                </a>
            </li>

            <!-- Page Numbers -->
            {% for p in page_range %}
            {% if p == '...' %}
            <li class="page-item disabled">
                <span class="page-link">...</span>
            </li>
            {% else %}
            <li class="page-item {% if p == page %}active{% endif %}">
                <a class="page-link {% if p != page %}gradient-text{% endif %}" href="{{ url_for('blog', page=p) }}">{{ p }}</a>
            </li>
            {% endif %}
            {% endfor %}

            <!-- Next Button -->
            <li class="page-item {% if page == total_pages %}disabled{% endif %}">
                <a class="page-link {% if page < total_pages %}gradient-text{% endif %}"
                    href="{% if page < total_pages %}{{ url_for('blog', page=page+1) }}{% else %}#{% endif %}"
                    aria-label="Next">
                    <i class="fas fa-chevron-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    {% endif %}
</div>
{% endblock %}
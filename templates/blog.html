{% extends 'base.html' %}

{% block title %}IoT Blog - Latest News, Insights & Technology Trends | Yalla IoT{% endblock %}

{% block meta_description %}Stay updated with the latest IoT trends, technology insights, and industry news. Expert articles on smart home, industrial IoT, Industry 4.0, and digital transformation in Saudi Arabia.{% endblock %}

{% block meta_keywords %}IoT blog, IoT news, smart home articles, industrial IoT insights, Industry 4.0 trends, IoT technology Saudi Arabia, digital transformation news{% endblock %}

{% block structured_data %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "Yalla IoT Blog",
  "description": "Latest news and insights about IoT and technology",
  "url": "{{ request.url }}",
  "publisher": {
    "@type": "Organization",
    "name": "Yalla IoT"
  }
}
</script>
{% endblock %}

{% block content %}
<div class="container section-padding" style="margin-top: 60px;">
    <section aria-labelledby="blog-heading">
    <div class="text-center mb-5">
        <h1 id="blog-heading" class="section-title gradient-text">Latest News & Insights</h1>
        <p class="text-muted">Stay updated with the latest trends in IoT and technology.</p>
    </div>

    <div class="row g-4">
        {% for post in posts %}
        <div class="col-md-4">
            <article class="card h-100 border-0 overflow-hidden">
                <img src="{{ post.image }}" class="card-img-top" alt="{{ post.title }}"
                    style="height: 200px; object-fit: cover;" loading="lazy">
                <div class="card-body d-flex flex-column">
                    <time class="mb-2 text-muted small" datetime="{{ post.date }}">
                        <i class="far fa-calendar-alt me-1" aria-hidden="true"></i> {{ post.date }}
                    </time>
                    <h2 class="card-title fw-bold h5">{{ post.title }}</h2>
                    <p class="card-text text-muted flex-grow-1">{{ post.content[:100] | safe }}...</p>
                    <a href="{{ url_for('post', post_slug=post.slug) }}" class="btn btn-primary mt-3" aria-label="Read more about {{ post.title }}">Read More</a>
                </div>
            </article>
        </div>
        {% endfor %}
    </div>
    </section>

    <!-- Pagination -->
    {% if total_pages > 1 %}
    <nav aria-label="Blog pagination" class="mt-5">
        <ul class="pagination justify-content-center">
            <!-- Previous Button -->
            <li class="page-item {% if page == 1 %}disabled{% endif %}">
                <a class="page-link {% if page > 1 %}gradient-text{% endif %}" href="{% if page > 1 %}{{ url_for('blog', page=page-1) }}{% else %}#{% endif %}"
                    aria-label="Previous">
                    <i class="fas fa-chevron-left"></i>
                </a>
            </li>

            <!-- Page Numbers -->
            {% for p in page_range %}
            {% if p == '...' %}
            <li class="page-item disabled">
                <span class="page-link">...</span>
            </li>
            {% else %}
            <li class="page-item {% if p == page %}active{% endif %}">
                <a class="page-link {% if p != page %}gradient-text{% endif %}" href="{{ url_for('blog', page=p) }}">{{ p }}</a>
            </li>
            {% endif %}
            {% endfor %}

            <!-- Next Button -->
            <li class="page-item {% if page == total_pages %}disabled{% endif %}">
                <a class="page-link {% if page < total_pages %}gradient-text{% endif %}"
                    href="{% if page < total_pages %}{{ url_for('blog', page=page+1) }}{% else %}#{% endif %}"
                    aria-label="Next">
                    <i class="fas fa-chevron-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    {% endif %}
</div>
{% endblock %}
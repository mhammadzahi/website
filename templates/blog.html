{% extends 'base.html' %}

{% block title %}IoT Blog - Latest News, Insights & Technology Trends | IIoT Bay{% endblock %}

{% block meta_description %}Stay updated with the latest IoT trends, technology insights, and industry news. Expert articles on smart home, industrial IoT, Industry 4.0, and digital transformation in Saudi Arabia.{% endblock %}

{% block meta_keywords %}IoT blog, IoT news, smart home articles, industrial IoT insights, Industry 4.0 trends, IoT technology Saudi Arabia, digital transformation news{% endblock %}

{% block structured_data %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "IIoT Bay Blog",
  "description": "Latest news and insights about IoT and technology",
  "url": "{{ request.url }}",
  "publisher": {
    "@type": "Organization",
    "name": "IIoT Bay"
  }
}
</script>
{% endblock %}

{% block content %}
<style>
    .blog-card {
        background-color: #FFFFFF !important;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border: 1px solid rgba(0, 173, 181, 0.15) !important;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08) !important;
        border-radius: 12px !important;
    }
    
    .blog-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 35px rgba(0, 173, 181, 0.2) !important;
        border-color: var(--primary-color) !important;
    }
    
    .blog-card .card-img-top {
        border-top-left-radius: 12px;
        border-top-right-radius: 12px;
        border-bottom: 3px solid var(--primary-color);
    }
    
    .blog-card .card-title {
        color: #222 !important;
        font-weight: 700;
        line-height: 1.4;
        transition: all 0.3s ease;
        font-size: 1.15rem !important;
    }
    
    .blog-card:hover .card-title {
        background: linear-gradient(135deg, #00ADB5 0%, #00D4FF 50%, #7B2CBF 100%);
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    
    .blog-card .card-text {
        color: #444 !important;
        line-height: 1.7;
        font-size: 0.95rem;
    }
    
    .blog-card time {
        color: var(--primary-color) !important;
        font-weight: 600;
        font-size: 0.85rem;
    }
    
    .blog-card time i {
        color: var(--primary-color);
    }
    
    .blog-card .card-body {
        background-color: #FFFFFF;
        border-bottom-left-radius: 12px;
        border-bottom-right-radius: 12px;
    }
    
    .blog-grid {
        display: flex !important;
        flex-wrap: wrap !important;
        gap: 1.5rem !important;
    }
    
    .blog-grid > div {
        flex: 0 0 auto !important;
    }
    
    @media (min-width: 992px) {
        .blog-grid > div {
            width: calc(33.333% - 1rem) !important;
        }
    }
    
    @media (min-width: 768px) and (max-width: 991px) {
        .blog-grid > div {
            width: calc(50% - 0.75rem) !important;
        }
    }
    
    @media (max-width: 767px) {
        .blog-grid > div {
            width: 100% !important;
        }
    }
</style>
<div class="container section-padding" style="margin-top: 60px;">
    <section aria-labelledby="blog-heading">
    <div class="text-center mb-5">
        <h1 id="blog-heading" class="section-title gradient-text" style="font-size: 2.8rem;">Latest News & Insights</h1>
        <p style="color: #666; font-size: 1.1rem;">Stay updated with the latest trends in IoT and technology.</p>
    </div>

    <div class="row g-4 blog-grid">
        {% for post in posts %}
        <div class="col-12 col-sm-6 col-md-6 col-lg-4">
            <article class="card blog-card h-100 overflow-hidden">
                <img src="{{ post.image }}" class="card-img-top" alt="{{ post.title }}"
                    style="height: 220px; object-fit: cover;" loading="lazy">
                <div class="card-body d-flex flex-column" style="padding: 1.5rem;">
                    <time class="mb-3" datetime="{{ post.date }}" style="font-size: 0.9rem;">
                        <i class="far fa-calendar-alt me-1" aria-hidden="true"></i> {{ post.date }}
                    </time>
                    <h2 class="card-title h5 mb-3">{{ post.title }}</h2>
                    <p class="card-text flex-grow-1" style="font-size: 0.95rem;">{{ post.content | striptags | truncate(150) }}</p>
                    <a href="{{ url_for('post', post_slug=post.slug) }}" class="btn btn-gradient mt-3" aria-label="Read more about {{ post.title }}">Read More <i class="fas fa-arrow-right ms-2" aria-hidden="true"></i></a>
                </div>
            </article>
        </div>
        {% endfor %}
    </div>
    </section>

    <!-- Pagination -->
    {% if total_pages > 1 %}
    <nav aria-label="Blog pagination" class="mt-5">
        <ul class="pagination justify-content-center">
            <!-- Previous Button -->
            <li class="page-item {% if page == 1 %}disabled{% endif %}">
                <a class="page-link {% if page > 1 %}gradient-text{% endif %}" href="{% if page > 1 %}{{ url_for('blog', page=page-1) }}{% else %}#{% endif %}"
                    aria-label="Previous">
                    <i class="fas fa-chevron-left"></i>
                </a>
            </li>

            <!-- Page Numbers -->
            {% for p in page_range %}
            {% if p == '...' %}
            <li class="page-item disabled">
                <span class="page-link">...</span>
            </li>
            {% else %}
            <li class="page-item {% if p == page %}active{% endif %}">
                <a class="page-link {% if p != page %}gradient-text{% endif %}" href="{{ url_for('blog', page=p) }}">{{ p }}</a>
            </li>
            {% endif %}
            {% endfor %}

            <!-- Next Button -->
            <li class="page-item {% if page == total_pages %}disabled{% endif %}">
                <a class="page-link {% if page < total_pages %}gradient-text{% endif %}"
                    href="{% if page < total_pages %}{{ url_for('blog', page=page+1) }}{% else %}#{% endif %}"
                    aria-label="Next">
                    <i class="fas fa-chevron-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    {% endif %}
</div>
{% endblock %}